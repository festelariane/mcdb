@{
    ViewBag.Title = "Index";
    Layout = "~/Administration/Views/Shared/_Layout.cshtml";
}
<link href="~/Administration/assets/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" />
<script src="~/Administration/assets/plugins/datatables/jquery.dataTables.min.js"></script>

<div class="box">
    <div class="box-header">
        <h3 class="box-title">Category List </h3>
    </div>
    <!-- /.box-header -->
    <div class="box-body">
        <div class="row">
            <div class="col-md-6">
                <div class="btn-group">
                    <a class="btn btn-danger" data-toggle="modal" href="#frm-edit-category" id="btn-add-category"> Add new <i class="fa fa-plus"></i> </a>
                </div>
            </div>
            <div class="col-md-6">
            </div>
        </div>
        <br />
        <table id="tb-category" class="table table-bordered table-striped">
          
        </table>
    </div>
    <!-- /.box-body -->
</div>
<div id="frm-edit-category" class="modal fade" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
                <div class="modal-content" id="edit-form">
                  
                </div>
            </div>
</div>
<script type="text/javascript">
    var resourceTable = null;
    function deleteResource(url) {
        if (confirm('Delete this record?')) {
            $.ajax({
                url: url,
                type: "post",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data) {
                        alert("Delete Successful");
                        resourceTable.ajax.reload();
                    } else {
                        alert("Delete Fail");
                    }
                },
                error: function (xhr, status, errThrow) {
                    alert(errThrow);
                }
            });
        }
    }

    function getResource(url) {
        $.ajax({
            url: url,
            type: "GET",
            dataType: "html",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                $("#edit-form").html(data);
            },
            error: function (xhr, status, errThrow) {
                alert(errThrow);
            }
        });
    }
    $(function () {
        $('#frm-edit-category').on('hidden.bs.modal', function (e) {
            //remove all html code:
            $("#edit-form").html('');
        })
        $("#btn-add-category").click(function () {
            var newItemUrl = '@Url.Action("Add")';
            getResource(newItemUrl);
        });
        resourceTable = $('#tb-category').DataTable(
               {
                   paging: true,
                   ajax:
                   {
                       url: '@Url.Action("List")',
                       type: "POST",
                       contentType: "application/json; charset=utf-8"
                   },
                   "pageLength": 20,
                   "lengthMenu": [
                       [10, 15, 20, -1],
                       [10, 15, 20, "All"] // change per page values here
                   ],
                   columns: [
                       { title: "Id", data: "Id" },
                       {title:"Code", data: "Code" },
                       { title: "Name", data: "Name" },
                       { title: "Image Url", data: "ImageUrl" },
                       { title: "Publised", data: "Published" },
                       {title:"Display Order", data: "DisplayOrder"},
                       {
                           //Edit column
                           mRender: function (data, type, fullObject) {
                               var Id = fullObject.Id;
                               var url = '@Url.Action("Update")/?Id=' + Id;
                               return '<a id="btn-update" data-toggle="modal" onclick="getResource(\'' + url + '\')" href="#frm-edit-category" class="edit"> Edit </a>';
                           }
                       },
                       {
                           //Delete column
                           mRender: function (data, type, fullObject) {
                               var Id = fullObject.Id;
                               var url = '@Url.Action("Delete")/?Id=' + Id;
                               return '<a class="delete" onclick="deleteResource(\'' + url + '\')" href=""> Delete </a>';
                           }
                       }
                   ],
               });
    });
</script>




@*<a data-toggle="modal" href="#myModal" class="btn btn-primary">Launch modal</a>

<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Modal title</h4>
            </div><div class="container"></div>
            <div class="modal-body">
                Content for the dialog / modal goes here.
                <br>
                <br>
                <br>
                <br>
                <br>
                <a data-toggle="modal" href="#myModal2" class="btn btn-primary">Launch modal</a>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
                <a href="#" class="btn btn-primary">Save changes</a>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="myModal2" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Second Modal title</h4>
            </div><div class="container"></div>
            <div class="modal-body">
                <iframe src="/administration/fileman/index.html?integration=custom&type=file&txtFieldId=ImageUrl" style="width:100%;height:100%" frameborder="0"></iframe>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
                <a href="#" class="btn btn-primary">Save changes</a>
            </div>
        </div>
    </div>
</div>*@